---
title: 01 UDP与TCP
date: 2021-03-20
categories:
 - 网络协议
tags:
 - TCP
---



TCP/IP 传输层中有两个重要的协议

+ UDP 用户数据报协议
+ TCP 传输控制协议



## UDP

UDP 是一个非常简单的传输层协议，它有以下几个特点：

1. **UDP 是无连接的**，发送数据之前无需建立连接，减少开销和发送数据的时延
2. **UDP 不保证可靠交付**
3. **UDP 是面向报文的**，发送方对从应用层传输过来的数据报，在添加首部后就向下交付给 IP 层。
4. **UDP 没有拥塞控制**
5. **UDP 支持一对一、一对多、多对一和多对多的交互通信**
6. **UDP 的首部开销小**，只有8个字节，其首部格式如下（1字节为8位，每16位就是2字节，所以总共8个字节）

<img src="@img/image-20210314132127374.png" alt="image-20210314132127374" style="zoom: 80%;" />



## TCP

相比于 UDP，TCP 是一个非常复杂的传输层协议

1. **TCP 是面向连接的传输层协议**，每次传输数据之前需要经过三次握手建立连接，传输完毕后需要四次挥手来断开连接
2. **TCP 提供可靠交付**
3. **TCP 是面向字节流的**，流指的是流入进程或从进程流出的字节序列
4. **TCP 提供全双工通信**，即 TCP 允许通信双方的应用进程在任何时候都能发送数据
5. 每条 TCP 连接只能有两个端点，即 TCP 连接只能是点对点的
6. TCP 首部最少占 20 个字节，具体首部格式如下

<img src="@img/image-20210314132158999.png" alt="image-20210314132158999" style="zoom:80%;" />

另外，TCP 标志位有着重要的作用，每个标志位的具体含义如下

+ URG：紧急位，URG=1 表明有紧急数据（高优先级数据）优先传送，优先交互
+ ACK：确认位，ACK=1 时确认号段有效，TCP 建立连接后传送的报文段 ACK 都置1
+ PSH：推送位，PSH=1 表明尽快将数据交付给应用层，不常用
+ RST：重置位，RST=1 表明 TCP 连接出现错误，需要释放连接后重新建立连接
+ SYN：同步位，SYN=1 表明建立连接请求或接受报文，三次握手用到
+ FIN：终止位，FIN=1 表明释放连接请求或接受报文，四次挥手用到



值得注意的是，IP 头中有个协议标识字段，它用于区分发送过来的数据包是 TCP 报文还是 UDP 报文。